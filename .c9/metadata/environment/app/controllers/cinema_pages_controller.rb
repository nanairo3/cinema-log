{"filter":false,"title":"cinema_pages_controller.rb","tooltip":"/app/controllers/cinema_pages_controller.rb","undoManager":{"mark":2,"position":2,"stack":[[{"start":{"row":15,"column":5},"end":{"row":16,"column":0},"action":"insert","lines":["",""],"id":27},{"start":{"row":16,"column":0},"end":{"row":16,"column":2},"action":"insert","lines":["  "]},{"start":{"row":16,"column":2},"end":{"row":17,"column":0},"action":"insert","lines":["",""]},{"start":{"row":17,"column":0},"end":{"row":17,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":17,"column":2},"end":{"row":58,"column":5},"action":"insert","lines":["def show","    @movie = Movie.details(params[:id])","    if @movie[\"credits\"][\"cast\"].count > 6","      @cast_range = 6","    else","      @cast_range = @movie[\"credits\"][\"cast\"].count","    end","    @trailers = Movie.trailers(params[:id])","","    @directors = {}","    @writers = {}","    @story = {}","    @screenplay = {}","    @novel = {}","    @music = {}","    @movie[\"credits\"][\"crew\"].each do |crew|","      if crew[\"job\"]==\"Director\" then @directors[crew[\"name\"]] = crew[\"id\"] end","      if crew[\"job\"]==\"Writer\" then @writers[crew[\"name\"]] = crew[\"id\"] end","      if crew[\"job\"]==\"Story\" then @story[crew[\"name\"]] = crew[\"id\"] end","      if crew[\"job\"]==\"Screenplay\" then @screenplay[crew[\"name\"]] = crew[\"id\"] end","      if crew[\"job\"]==\"Novel\" then @novel[crew[\"name\"]] = crew[\"id\"] end","      if crew[\"job\"]==\"Original Music Composer\" then @music[crew[\"name\"]] = crew[\"id\"] end","    end","    @directors_count = @directors.size","    @writers_count = @writers.size","    @story_count = @story.size","    @screenplay_count = @screenplay.size","    @novel_count = @novel.size","    @music_count = @music.size","","","    # get current user's comment","    @current_user_comment = Comment.find_by(user_id: current_user.id, movie_id: @movie[\"id\"]) if logged_in?","    # create new comment","    @comment = Comment.new if logged_in? && watched_check(@movie[\"id\"])","    if Movie.exists?(@movie[\"id\"])","      # find movie object from database","      @movie_db = Movie.find(@movie[\"id\"])","      # paginate all of the movie's comments","      @comments = @movie_db.comments.paginate(page: params[:page])","    end","  end"],"id":28}],[{"start":{"row":58,"column":5},"end":{"row":59,"column":0},"action":"insert","lines":["",""],"id":29},{"start":{"row":59,"column":0},"end":{"row":59,"column":2},"action":"insert","lines":["  "]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":59,"column":2},"end":{"row":59,"column":2},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1568274627010,"hash":"152bc48f055e6d2af1a4abba49f26d1735ce4b4e"}
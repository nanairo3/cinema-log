{"filter":false,"title":"post_controller.rb","tooltip":"/app/controllers/post_controller.rb","undoManager":{"mark":1,"position":1,"stack":[[{"start":{"row":1,"column":0},"end":{"row":5,"column":0},"action":"remove","lines":["  before_action :authenticate_user, {only: [:create, :edit,:update, :destroy]}","  before_action :authenticate_user_new, {only: [:new]}","  before_action :ensure_correct_user, {only: [:edit, :update, :destroy]}","",""],"id":125,"ignore":true},{"start":{"row":4,"column":0},"end":{"row":5,"column":0},"action":"insert","lines":["    @user = User.find(params[:id])",""]},{"start":{"row":30,"column":0},"end":{"row":45,"column":0},"action":"remove","lines":["  def ensure_correct_user","    @post = Post.find_by(id: params[:id])","    if !(current_user.admin?) && current_user.id != @post.user_id","      flash[:notice] = \"権限がありません\"","      redirect_to(\"/post/#{@post.cinema_id}\")","    end","  end","  ","  def authenticate_user_new","    if current_user == nil","      flash[:notice] = \"ログインして投稿しませんか？\"","      redirect_to(\"/login\")","    end","  end","",""]}],[{"start":{"row":1,"column":0},"end":{"row":5,"column":0},"action":"insert","lines":["  before_action :authenticate_user, {only: [:create, :edit,:update, :destroy]}","  before_action :authenticate_user_new, {only: [:new]}","  before_action :ensure_correct_user, {only: [:edit, :update, :destroy]}","",""],"id":126,"ignore":true},{"start":{"row":8,"column":0},"end":{"row":9,"column":0},"action":"remove","lines":["    @user = User.find(params[:id])",""]},{"start":{"row":33,"column":0},"end":{"row":48,"column":0},"action":"insert","lines":["  def ensure_correct_user","    @post = Post.find_by(id: params[:id])","    if !(current_user.admin?) && current_user.id != @post.user_id","      flash[:notice] = \"権限がありません\"","      redirect_to(\"/post/#{@post.cinema_id}\")","    end","  end","  ","  def authenticate_user_new","    if current_user == nil","      flash[:notice] = \"ログインして投稿しませんか？\"","      redirect_to(\"/login\")","    end","  end","",""]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":33,"column":0},"end":{"row":33,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1567650896887,"hash":"59618a4940c68654a0488aa039ca674570b1bf6d"}
{"filter":false,"title":"application_record.rb","tooltip":"/app/models/application_record.rb","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":5,"column":2},"end":{"row":27,"column":5},"action":"remove","lines":["def add_movies_to_db movies","    movies.each do |m|","      unless Movie.exists?(m[\"id\"])","        # m[\"genre_ids\"].each do |id|","        #   genres << GENRES.key(id)+',' unless m[\"genre_ids\"].blank?","        # end","        Movie.add(m[\"id\"], m[\"title\"], m[\"poster_path\"], m[\"genre_ids\"])","      end","    end","  end","","  def add_movie_to_db movie","    unless Movie.exists?(movie[\"id\"])","      ids_arr = Array.new","      ids_str = movie[\"genres_ids\"]","      movie[\"genres\"].each do |genre|","        ids_arr << genre[\"id\"]","      end","      title = movie[\"original_language\"]==\"ja\" ? movie[\"original_title\"] : movie[\"title\"]","      Movie.add(movie[\"id\"], title, movie[\"poster_path\"], ids_arr) unless ids_arr.nil?","      Movie.add(movie[\"id\"], title, movie[\"poster_path\"], ids_str) unless ids_str.nil?","    end","  end"],"id":10},{"start":{"row":5,"column":0},"end":{"row":5,"column":2},"action":"remove","lines":["  "]},{"start":{"row":4,"column":2},"end":{"row":5,"column":0},"action":"remove","lines":["",""]},{"start":{"row":4,"column":0},"end":{"row":4,"column":2},"action":"remove","lines":["  "]},{"start":{"row":3,"column":28},"end":{"row":4,"column":0},"action":"remove","lines":["",""]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":3,"column":28},"end":{"row":3,"column":28},"isBackwards":false},"options":{"tabSize":2,"useSoftTabs":true,"guessTabSize":false,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":13,"mode":"ace/mode/ruby"}},"timestamp":1568357506214,"hash":"73507b0608fcd792376697d4b0bb8e25f63e1f3d"}